<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Livros - Biblioteca Escolar</title>
    <link rel="stylesheet" href="{{url_for('static',filename='css/st_livros.css')}}">
    <style>
        
    </style>
</head>
<body>
<header class="header">
    <h1>üìö Controle de Livros</h1>
</header>

<nav class="nav">
    <ul>
        <li><a href="{{url_for('main.index')}}">In√≠cio</a></li>
        <li><a href="{{url_for('main.livros')}}" class="active">Livros</a></li>
        <li><a href="{{url_for('main.emprestimos')}}">Empr√©stimos</a></li>
        <li><a href="{{url_for('main.alunos')}}">Alunos</a></li>
    </ul>
</nav>

<div class="container">
    <h2 class="section-title">Gerenciamento de Acervo</h2>

    <form class="controls" action="/post_livro" method="POST">
        <div class="controls-row">
            <div class="form-group">
                <label for="titulo">T√≠tulo do Livro</label>
                <input type="text"name="titulo" placeholder="Digite o t√≠tulo...">
            </div>
            <div class="form-group">
                <label for="autor">Autor</label>
                <input type="text" name="autor" placeholder="Digite o autor...">
            </div>
            <div class="form-group">
                <label for="isbn">ISBN</label>
                <input type="text" name="isbn" placeholder="Digite o ISBN...">
            </div>
            <div class="form-group">
                <label for="categoria">Categoria</label>
                <select name="categoria">
                    <option value="">Todas</option>
                    <option value="ficcao">Fic√ß√£o</option>
                    <option value="nao-ficcao">N√£o-Fic√ß√£o</option>
                    <option value="didatico">Did√°tico</option>
                    <option value="referencia">Refer√™ncia</option>
                </select>
            </div>
            <div class="form-group">
                <label for="ano">Ano Publica√ß√£o</label>
                <input type="number" name="ano" id="anoPublicacaoc" placeholder="Digite o ano...">
            </div>
        </div>
        <div class="controls-row" style="margin-top: 1rem;">
            <button class="btn" type="submit">‚ûï Adicionar Livro</button>
        </div>
    </form>

    <div class="table-container">
        <table id="tabelaLivros">
            <thead>
            <tr>
                <th>ID</th>
                <th>T√≠tulo</th>
                <th>Autor</th>
                <th>ISBN</th>
                <th>Categoria</th>
                <th>Ano</th>
                <th>A√ß√µes</th>
            </tr>
            </thead>
            <tbody>
                {%for livro in livros%}
                <tr id="livro-{{livro.id}}">
                    <td>{{livro.id}}</td>
                    <td>{{livro.titulo}}</td>
                    <td>{{livro.autor}}</td>
                    <td>{{livro.isbn}}</td>
                    <td>{{livro.categoria}}</td>
                    <td>{{livro.ano}}</td>
                    <td>
                       <button 
                       class="action-btn"
                       onclick="editarLivro(
                            '{{ livro.id}}', 
                            '{{ livro.titulo }}', 
                            '{{ livro.autor }}', 
                            '{{ livro.isbn }}', 
                            '{{ livro.categoria }}', 
                            '{{ livro.ano }}'
                        )"> ‚úèÔ∏è Editar</button>
                        <button class="action-btn" onclick="excluirLivro('{{livro.id}}')">üóëÔ∏è Excluir</button>
                    </td>
                </tr>
                {%endfor%}
            </tbody>
        </table>
    </div>
</div>

<footer class="footer">
    <p>&copy; 2025 Sistema de Biblioteca Escolar. Todos os direitos reservados.</p>
</footer>

<div id="livroModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="fecharModal()">&times;</span>
    <h2>Editar Livro</h2>

    <form id="formEditarLivro">
      <input type="hidden" id="edit-id">

      <label for="edit-titulo">T√≠tulo:</label>
      <input type="text" id="edit-titulo" required>

      <label for="edit-autor">Autor:</label>
      <input type="text" id="edit-autor" required>

      <label for="edit-isbn">ISBN:</label>
      <input type="text" id="edit-isbn" required>

      <label for="edit-categoria">Categoria:</label>
      <input type="text" id="edit-categoria" required>

      <label for="edit-ano">Ano:</label>
      <input type="number" id="edit-ano" required>

      <!-- <label for="edit-status">Status:</label>
      <select id="edit-status">
        <option value="dispon√≠vel">Dispon√≠vel</option>
        <option value="emprestado">Emprestado</option>
      </select> -->

      <button type="button" class="btn-salvar" onclick="salvarEdicao()">Salvar</button>
    </form>
  </div>
</div>

<script src="{{url_for('static',filename='js/sc_livros.js')}}"></script>
</body>
</html>
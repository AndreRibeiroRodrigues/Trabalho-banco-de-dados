<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Empr√©stimos - Biblioteca Escolar</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/st_emprestimos.css')}}">
    <style>
        
    </style>
</head>
<body>
    <header class="header">
        <h1>üìñ Controle de Empr√©stimos</h1>
    </header>

    <nav class="nav">
        <ul>
            <li><a href="{{url_for('main.index')}}">In√≠cio</a></li>
            <li><a href="{{url_for('main.livros')}}">Livros</a></li>
            <li><a href="{{url_for('main.emprestimos')}}" class="active">Empr√©stimos</a></li>
            <li><a href="{{url_for('main.alunos')}}">Alunos</a></li>
            <li><a href="{{url_for('main.relatorios')}}">Relat√≥rios</a></li>
        </ul>
    </nav>

    <div class="container">
        <h2 class="section-title">Gerenciamento de Empr√©stimos</h2>

        <form class="controls" action="/post_emprestimo" method="POST"> 
            <div class="controls-row">
                <div class="form-group">
                    <label for="aluno">Aluno</label>
                    <select name="aluno">
                        <option value="">Selecione um aluno</option>
                        <option value="1">Maria Silva - 001</option>
                        {%for aluno in alunos%}
                        <option value="{{aluno.matricula}}">{{aluno.nome}} - {{aluno.matricula}}</option>
                        {%endfor%}
                    </select>
                </div>
                <div class="form-group">
                    <label for="livro">Livro</label>
                    <select name="livro">
                        <option value="">Selecione um livro</option>
                        <option value="1">Dom Casmurro</option>
                        {%for livro in livros%}
                        <option value="{{livro.id}}">{{livro.titulo}}</option>
                        {%endfor%}
                    </select>
                </div>
                <div class="form-group">
                    <label for="dataEmprestimo">Data de Empr√©stimo</label>
                    <input type="date" id="dataEmprestimo">
                </div>
                <div class="form-group">
                    <label for="dataDevolucao">Data de Devolu√ß√£o</label>
                    <input type="date" id="dataDevolucao">
                </div>
            </div>
            <div class="controls-row" style="margin-top: 1rem;">
                <button class="btn" type="submit" name="acao" value="inserir"> Registrar Empr√©stimo</button>
                <button class="btn btn-seco'ndary" onclick="filtrarEmprestimos()">üîç Filtrar</button>
                <button class="btn btn-secondary" onclick="limparFiltros()">‚úñ Limpar</button>
            </div>
        </form>

        <div class="table-container">
            <table id="tabelaEmprestimos">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Aluno</th>
                        <th>Livro</th>
                        <th>Data Empr√©stimo</th>
                        <th>Data Devolu√ß√£o</th>
                        <th>Data Devolvido</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                     {%for emprestimo in emprestimos%}
                    <tr>
                        <td>{{emprestimo.id}}</td>
                        <td>{{emprestimo.aluno}}</td>
                        <td>{{emprestimo.livro}}</td>
                        <td>{{emprestimo.dataEmprestimo}}</td>
                        <td>{{emprestimo.dataDevolucao}}</td>
                       
                        {%if emprestimo.status == 'ativo'%}
                        <td><span class="status-badge status-ativo">{{emprestimo.status}}</span></td>
                        {%elif emprestimo.status == 'devolvido'%}
                        <td><span class="status-badge status-devolvido">{{emprestimo.status}}</span></td>
                        {%endif%}                       
                        <td>
                            <button class="action-btn" onclick="devolverLivro(1)">‚úì Devolver</button>
                            <button class="action-btn" onclick="renovarEmprestimo(1)">üîÑ Renovar</button>
                        </td>
                    </tr>
                    {%endfor%} 
                    <tr>
                        <td>001</td>
                        <td>Maria Silva</td>
                        <td>O Corti√ßo</td>
                        <td>15/01/2025</td>
                        <td>29/01/2025</td>
                        <td>-</td>
                        <td><span class="status-badge status-ativo">Ativo</span></td>
                        <td>
                            <button class="action-btn" onclick="devolverLivro(1)">‚úì Devolver</button>
                            <button class="action-btn" onclick="renovarEmprestimo(1)">üîÑ Renovar</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 Sistema de Biblioteca Escolar. Todos os direitos reservados.</p>
    </footer>

    <!-- <script src="url_for('static', filename='js/sc_emprestimos.js')"></script> -->
</body>
</html>